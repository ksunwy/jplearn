import { Link, useLocation, useNavigate } from "react-router-dom";
import { useUserStore } from "../profile/model/user.model";

export function AppHeader() {
  const currentUser = useUserStore((state) => state.currentUser);
  const location = useLocation();
  const navigate = useNavigate();

  const isHome = location.pathname === "/";

  return (
    <header className="p-8 flex items-center justify-between">
      <div className="flex items-center gap-4">
        {!isHome && (
          <button
            onClick={() => navigate(-1)}
            className="p-2 rounded-full hover:bg-orange-100"
          >
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" strokeWidth={2} stroke="currentColor" className="w-6 h-6">
              <path strokeLinecap="round" strokeLinejoin="round" d="M15 19l-7-7 7-7" />
            </svg>
          </button>
        )}

        <Link to="/"> 
          <svg width="30" height="33" viewBox="0 0 30 33" fill="none" xmlns="http://www.w3.org/2000/svg"> <path d="M11.8982 28.1245C9.44546 30.0815 7.42556 30.6613 5.51387 30.6613C2.70044 30.6613 0.608398 28.5956 0.608398 25.0441C0.608398 20.2242 4.21536 15.9116 9.26512 13.6647C9.22904 13.1573 9.22904 12.65 9.22904 12.1064C9.22904 10.6568 9.26512 9.20716 9.30118 7.7938C7.28128 7.83004 5.04497 7.86628 2.91686 7.86628C1.97905 7.83004 1.54621 7.32268 1.54621 6.45292C1.54621 5.69187 2.01511 5.14827 2.80865 5.14827C3.42183 5.14827 4.07108 5.14827 4.68427 5.14827C6.23526 5.14827 7.82233 5.14827 9.44546 5.11203C9.48153 3.84363 9.55367 2.53899 9.66188 1.41554C9.73402 0.726981 10.239 0.255859 11.0325 0.255859C11.1047 0.255859 11.1407 0.255859 11.2129 0.255859C12.0785 0.328341 12.4392 0.726981 12.4392 1.41554C12.4392 1.45178 12.4392 1.52426 12.4392 1.59674C12.331 2.64771 12.2589 3.77115 12.1868 5.00331C16.8037 4.82211 21.2042 4.49595 25.2079 3.87987C25.28 3.87987 25.3882 3.87987 25.4604 3.87987C26.1818 3.87987 26.6507 4.31475 26.7589 5.07579C26.7589 5.18451 26.7589 5.25699 26.7589 5.32947C26.7589 6.05427 26.3261 6.5254 25.4965 6.63412C21.4927 7.17772 16.9119 7.50388 11.9703 7.68508C11.9343 9.02596 11.8982 10.3668 11.8982 11.744C11.8982 12.0701 11.8982 12.3963 11.8982 12.7225C13.3771 12.3238 15.433 11.9614 18.0661 11.9614C18.2104 11.3453 18.3186 10.8017 18.3907 10.3668C18.4989 9.78701 18.9318 9.46084 19.581 9.46084C19.6532 9.46084 19.7614 9.46084 19.8696 9.49708C20.591 9.56956 21.0238 10.0044 21.0238 10.6205C21.0238 10.693 21.0238 10.7655 21.0238 10.838C20.9517 11.2728 20.8435 11.744 20.7353 12.2151C26.6146 13.1211 29.6084 16.6726 29.6084 21.5288C29.6084 27.3997 24.4504 31.9659 16.6955 32.2559C16.6594 32.2559 16.6594 32.2559 16.6233 32.2559C15.7577 32.2559 15.2166 31.6398 15.1805 30.8787C15.1805 30.8425 15.1805 30.8063 15.1805 30.8063C15.1805 29.9727 15.7216 29.5016 16.443 29.4654C22.8634 29.1392 26.5785 25.7689 26.5785 21.3838C26.5785 17.7598 24.3422 15.1505 20.1221 14.6069C18.9318 19.1007 16.5512 23.522 14.0624 26.1313C14.2427 26.5662 14.4231 27.0373 14.6756 27.5809C14.7838 27.7983 14.8559 28.052 14.8559 28.3057C14.8559 28.8131 14.6034 29.2479 14.0624 29.5379C13.8099 29.6466 13.5574 29.7191 13.341 29.7191C12.9081 29.7191 12.5475 29.5016 12.331 29.103C12.1868 28.8131 12.0425 28.4507 11.8982 28.1245ZM10.9604 25.4427C10.1308 22.9059 9.58974 19.6443 9.40939 16.3102C5.44173 18.4484 3.34969 21.855 3.34969 24.8629C3.34969 26.8561 4.39571 27.8346 5.87457 27.8346C7.20914 27.8346 9.01263 27.1822 10.9604 25.4427ZM13.0885 23.3046C14.9281 21.0214 16.6233 17.7961 17.5611 14.2808C14.928 14.2808 12.9803 14.7519 11.9703 15.1505C12.0425 18.1585 12.4392 20.949 13.0885 23.3046Z" fill="#1E1E21" /> </svg> 
        </Link>
      </div>

      <ul className="absolute top-10 left-1/2 -translate-x-1/2">
        <li><Link to={"/courses"}>Courses</Link></li>
      </ul>

      {currentUser ? (
        <Link
          to="/profile"
          className="w-8 h-8 rounded-full bg-[#f5b247] mb-4 flex items-center justify-center"
        >
          <span className="text-white text-xl">
            {currentUser?.username ? currentUser.username.charAt(0) : "ðŸ‘¤"}
          </span>
        </Link>
      ) : (
        <Link
          to="/login"
          className="rounded-2xl bg-yellow text-background px-6 py-2 font-bold font-hiragino"
        >
          Login
        </Link>
      )}
    </header>
  );
}
